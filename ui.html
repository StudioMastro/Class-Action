<!DOCTYPE html>
<html>

<head>
  <style>
    body {
      font-family: sans-serif;
      padding: 16px;
    }

    .class-input {
      display: flex;
      margin-bottom: 16px;
    }

    .class-list {
      margin-bottom: 16px;
    }

    .class-actions {
      display: flex;
      justify-content: space-between;
    }

    .rename-button,
    .delete-button,
    .apply-button {
      background-color: transparent;
      border: none;
      cursor: pointer;
    }

    .rename-button:hover,
    .delete-button:hover {
      text-decoration: underline;
    }

    .apply-button {
      background-color: #18a0fb;
      color: #ffffff;
      border: none;
      border-radius: 4px;
      padding: 6px 12px;
      cursor: pointer;
    }
  </style>
</head>

<body>
  <div class="class-input">
    <input type="text" id="classNameInput" placeholder="Class name" />
    <button onclick="saveClass()">Save class</button>
  </div>
  <div id="classList"></div>
  <script>
    function saveClass() {
      const className = document.getElementById('classNameInput').value;
      window.parent.postMessage({ pluginMessage: { type: 'save-class', className } }, '*');
    }

    function deleteClass(className) {
      window.parent.postMessage({ pluginMessage: { type: 'delete-class', className } }, '*');
    }

    function renameClass(oldName) {
      const newName = prompt('Enter new class name:', oldName);
      if (newName && newName !== oldName) {
        window.parent.postMessage({ pluginMessage: { type: 'rename-class', oldName, newName } }, '*');
      }
    }

    function applyClass(className) {
      window.parent.postMessage({ pluginMessage: { type: 'apply-class', className } }, '*');
    }

    onmessage = (event) => {
      if (event.data.pluginMessage.type === 'display-saved-classes') {
        const savedClasses = event.data.pluginMessage.savedClasses;
        const classList = document.getElementById('classList');
        classList.innerHTML = '';

        for (const className in savedClasses) {
          const classDiv = document.createElement('div');
          classDiv.innerHTML = `
              <div class="class-actions">
                <span>${className}</span>
                <div>
                  <button class="apply-button" onclick="applyClass('${className}')">Apply</button>
                  <button class="rename-button" onclick="renameClass('${className}')">Rename</button>
                  <button class="delete-button" onclick="deleteClass('${className}')">Delete</button>
                </div>
              </div>
            `;
          classList.appendChild(classDiv);
        }
      }
    };
  </script>
</body>

</html>